<!DOCTYPE html>
<html lang="cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>销售机会文档</title>
    <link href="../combestres/bootstrap/css/bootstrap.css" rel="stylesheet">
    <script src="../combestres/bootstrap/js/jquery-1.12.3.min.js"></script>
    <script src="../combestres/bootstrap/js/bootstrap.js"></script>
    <script src="../combestres/js/combest.js"></script>
    <script>
        function load(){
            var script=document.createElement("script");
            var url=location.href;

            var unid=url.substring(url.indexOf("unid=")+5);
            script.src="http://app.server_address/app.ou/combest_mopcontroller.nsf/CBXsp_getDocument.xsp?callback=edit&db=app.ou/combest_crm.nsf&items=cusName,cusNum,cusWebsite,cusDivide,masterDivide,findTime,catchTime,catchProcess,cusProperty,hotCus,cusType,cusFrom,pridictDate,pridictMoney,cusContacts,cusTelephone&unid="+unid
            document.body.appendChild(script);
            kailLodings();
        }
    </script>
</head>
<style type="text/css">
#conter{
    padding-bottom:30px;
}
</style>
<body onload="load()">
<style type="text/css">
    *{
         font-family:微软雅黑;
    }
        #lodings{
            position:fixed;
            top:0px;
            left:0px;
            background:rgba(0, 0, 0, 0.3);
            width:100%;
            height:100%;
            z-index:999999;
            text-align:center;
        }
        #lodings>div{
            width:100%;
            height:100%;
            position:relative;
        }
        #lodings>div>img{
            width: 30%;
            height: auto;
            display: initial;
            position: absolute;
            margin: auto;
            top: 40%;
            left: 35%;
        }
    </style>
<div id="lodings">
    <div><img src="combestres/images/loding.gif" alt=""></div>
</div>
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header" style="text-align:center;height:45px;line-height:50px;background-color:#2e2e2e;">
        
         <a class="navbar-brand" href="Sales_opportunities.html" style="color:#fff;font-size:1.1em;">
            <span class="glyphicon glyphicon-menu-left"style="font-size:1.3em;" ></span>
            <span style="position: absolute;display: inline-block;margin-top: -23px;margin-left: 10px;">返回</span>
        </a>
        <span style="font-size:1.2em;color:#fff">新增机会</span>
      <!--   <span style="color:#fff;background-color:#FE0000;display:inline-block;padding:0;margin:0;height:13px;line-height:13px;border-radius:6px;font-size:0.8em;padding:0px 2px 0px 2px;position:absolute;margin-top:15px;margin-left:5px;">new</span> -->
        <span class="navbar-brand" style="float:right;font-size:1.1em;color:#fff;">
            <span style="display: none;" id="ok">提交</span>
         <span  style="display:inline-block;" id="bianji">编辑</span>    
        </span>
    </div>
  </div>
</nav>
<div class="container-fluid" style="position:relative;top:60px;">
<!-- http://{app.server_address}/{app.ou}/combest_crm.nsf/CBXsp_save.xsp -->
    <form action="javascript:vido(0)" >
    <fieldset id="conter">
        <div class="form-group" style="border-bottom:1px solid #f1f1f1;height:65px;line-height:65px;margin:0;">
            <!-- <img src="../combestres/images/customer/crm1.png" style="margin-top:-2px;width:25px;height:25px;" > -->
            <span for="cusName" class="labels">客户名称</span>
            <input type="text" disabled class="form-control required" id="cusName" name="cusName" placeholder="客户名称"
                   style="float:right;width:73%;margin-top:15px;">
        </div>

        <div class="form-group" style="border-bottom:1px solid #f1f1f1;height:65px;line-height:65px;margin:0;">
            <!-- <img src="../combestres/images/customer/crm9.png" style="margin-top:-2px;width:25px;height:25px;" > -->
            <span for="cusNum" class="labels">客户编号</span>
            <input type="text" disabled class="form-control required" id="cusNum" name="cusNum" placeholder="客户编号"
                   style="float:right;width:73%;margin-top:15px;">
        </div>
        <div class="form-group" style="border-bottom:1px solid #f1f1f1;height:65px;line-height:65px;margin:0;">
            <!-- <img src="../combestres/images/customer/crm10.png" style="margin-top:-2px;width:25px;height:25px;" > -->
            <span for="cusWebsite" class="labels">客户网址</span>
            <input type="text" disabled="" class="form-control required" id="cusWebsite" name="cusWebsite" placeholder="客户网址"
                   style="float:right;width:73%;margin-top:15px;">
        </div>
        <div class="form-group" style="border-bottom:1px solid #f1f1f1;height:65px;line-height:65px;margin:0;">
            <!-- <img src="../combestres/images/customer/crm11.png" style="margin-top:-2px;width:25px;height:25px;" > -->
            <span for="cusDivide" class="labels">分管销售</span>
            <input type="text" disabled class="form-control required" id="cusDivide" name="cusDivide" placeholder="分管销售"
                   style="float:right;width:73%;margin-top:15px;">
        </div>
        <div class="form-group" style="border-bottom:1px solid #f1f1f1;height:65px;line-height:65px;margin:0;">
            <!-- <img src="../combestres/images/customer/crm12.png" style="margin-top:-2px;width:25px;height:25px;" > -->
            <span for="masterDivide" class="labels">分管主管</span>
            <input type="select" disabled  class="form-control required" id="masterDivide" name="masterDivide" placeholder="分管主管"
                   style="float:right;width:73%;margin-top:15px;">
        </div>
        <div class="form-group" style="border-bottom:1px solid #f1f1f1;height:65px;line-height:65px;margin:0;">
            <!-- <img src="../combestres/images/customer/crm4.png" style="margin-top:-2px;;width:25px;height:25px;" > -->
            <span for="findTime" class="labels">发现时间</span>
            <input type="date" disabled class="form-control required" id="findTime" name="findTime" placeholder="发现时间"
                   style="float:right;width:73%;margin-top:15px;">
        </div>
        <div class="form-group" style="border-bottom:1px solid #f1f1f1;height:65px;line-height:65px;margin:0;">
            <!-- <img src="../combestres/images/customer/crm13.png" style="margin-top:-2px;width:25px;height:25px;" > -->
            <span for="catchTime" class="labels">跟进时间</span>
            <input type="date" disabled class="form-control required" id="catchTime" name="catchTime" placeholder="跟进时间" value=""
                   style="float:right;width:73%;margin-top:15px;">
        </div>
        <div class="form-group" style="border-bottom:1px solid #f1f1f1;height:65px;line-height:65px;margin:0;">
            <!-- <img src="../combestres/images/customer/crm14.png" style="margin-top:-2px;width:25px;height:25px;" > -->
            <span for="catchProcess" class="labels">跟进阶段</span>
            <input type="text" disabled class="form-control required" id="catchProcess" name="catchProcess" placeholder="跟进阶段"
                   style="float:right;width:73%;margin-top:15px;">
        </div>
        <div class="form-group" style="border-bottom:1px solid #f1f1f1;height:65px;line-height:65px;margin:0;">
            <!-- <img src="../combestres/images/customer/crm5.png" style="margin-top:-2px;;width:25px;height:25px;" > -->
            <span for="cusProperty" class="labels">客户性质</span>
            <input type="text" disabled class="form-control required" id="cusProperty" name="cusProperty" placeholder="客户性质"
                   style="float:right;width:73%;margin-top:15px;">
        </div>
        <div class="form-group" style="border-bottom:1px solid #f1f1f1;height:65px;line-height:65px;margin:0;">
            <!-- <img src="../combestres/images/customer/hcus2.png" style="margin-top:-8px;width:25px;height:25px;" > -->
            <span for="hotCus" class="labels">热点客户</span>
            <input type="text" disabled class="form-control required" id="hotCus" name="hotCus" placeholder="热点客户"
                   style="float:right;width:73%;margin-top:15px;">
        </div>
        <div class="form-group" style="border-bottom:1px solid #f1f1f1;height:65px;line-height:65px;margin:0;">
            <!-- <img src="../combestres/images/customer/crm6.png" style="margin-top:-2px;;width:25px;height:25px;" > -->
            <span for="cusType" class="labels">客户类型</span>
            <input type="text" disabled class="form-control required" id="cusType" name="cusType" placeholder="客户类型"
                   style="float:right;width:73%;margin-top:15px;">
        </div>
        <div class="form-group" style="border-bottom:1px solid #f1f1f1;height:65px;line-height:65px;margin:0;">
            <!-- <img src="../combestres/images/customer/crm15.png" style="margin-top:-2px;width:25px;height:25px;" > -->
            <span for="cusFrom" class="labels">客户来源</span>
            <input type="text" disabled class="form-control required" id="cusFrom" name="cusFrom" placeholder="客户来源"
                   style="float:right;width:73%;margin-top:15px;">
        </div>
        <div class="form-group" style="border-bottom:1px solid #f1f1f1;height:65px;line-height:65px;margin:0;">
            <!-- <img src="../combestres/images/customer/crm16.png" style="margin-top:-2px;width:25px;height:25px;" > -->
            <span for="pridictDate" class="labels">预计采购日期</span>
            <input type="date" disabled class="form-control required" id="pridictDate" name="pridictDate" placeholder="预计采购日期"
                   style="float:right;width:70%;margin-top:15px;">
        </div>
        <div class="form-group" style="border-bottom:1px solid #f1f1f1;height:65px;line-height:65px;margin:0;">
            <!-- <img src="../combestres/images/customer/crm17.png" style="margin-top:-2px;width:25px;height:25px;" > -->
            <span for="pridictMoney" class="labels">预计采购金额</span>
            <input type="text" disabled class="form-control required" id="pridictMoney" name="pridictMoney" placeholder="预计采购金额"
                   style="float:right;width:70%;margin-top:15px;">
        </div>
        <div class="form-group" style="border-bottom:1px solid #f1f1f1;height:65px;line-height:65px;margin:0;">
            <!-- <img src="../combestres/images/customer/crm18.png" style="margin-top:-2px;width:25px;height:25px;" > -->
            <span for="cusContacts" class="labels">客户联系人</span>
            <input type="text" disabled class="form-control required" id="cusContacts" name="cusContacts" placeholder="客户联系人"
                   style="float:right;width:73%;margin-top:15px;">
        </div>
        <div class="form-group" style="border-bottom:1px solid #f1f1f1;height:65px;line-height:65px;margin:0;">
            <!-- <img src="../combestres/images/customer/crm7.png" style="margin-top:-2px;;width:25px;height:25px;" > -->
            <span for="cusTelephone" class="labels">手机号码</span>
            <input type="text" disabled class="form-control required" id="cusTelephone" name="cusTelephone" types="tel"  placeholder="手机号码"
                   style="float:right;width:73%;margin-top:15px;">
        </div>
    </fieldset>
</form>
</div>
<script type="text/javascript">
 var url=location.href;
var unids =url.indexOf("unid=")
        if(unids=="-1"){
            $(".form-group input,.form-group select").removeAttr("disabled")
            $("#ok").css({"display":"inline-block"})
            $("#bianji").css('display', 'none');    
        }

    $("#bianji").click(function(){
        $(".form-group input").removeAttr("disabled")
        $(this).css({"display":"none"});
        $("#ok").css({"display":"inline-block"})
    })
 $("#ok").click(function(){
        var url=location.href;
        var unid=url.substring(url.indexOf("unid=")+5);
        var posts=[
                encodeURI($("#cusName").val()),//客户名称
                encodeURI($("#cusNum").val()),//客户编号
                encodeURI($("#cusWebsite").val()),//客户网址
                encodeURI($("#cusDivide").val()),//分管销售
                encodeURI($("#masterDivide").val()),//分管主管
                encodeURI($("#findTime").val()),//发现时间
                encodeURI($("#catchTime").val()),//跟进时间
                encodeURI($("#catchProcess").val()),//跟进阶段
                encodeURI($("#cusProperty").val()),//客户性质
                encodeURI($("#hotCus").val()),//热点客户
                encodeURI($("#cusType").val()),//客户类型
                encodeURI($("#cusFrom").val()),//客户来源
                encodeURI($("#pridictDate").val()),//预计采购日期
                encodeURI($("#pridictMoney").val()),//预计采购金额
                encodeURI($("#cusContacts").val()),//客户联系人
                encodeURI($("#cusTelephone").val()),//手机号码
                ]
        for (var i = 1; i < $(".required").length+1; i++) {
                var a = Verification.text("fieldset>.form-group:nth-child("+i+")>.required");
                if(a==false){
                    return false;
                    break;
                    
                    }
                }
                 if(unids=="-1"){
                    var urldata =  "form=CBFrm_cusChance&db=app.ou/combest_crm.nsf&cusName="+posts[0]+"&cusNum="+posts[1]+"&cusWebsite="+posts[2]+"&cusDivide="+posts[3]+"&masterDivide="+posts[4]+"&findTime="+posts[5]+"&catchTime="+posts[6]+"&catchProcess="+posts[7]+"&cusProperty="+posts[8]+"&hotCus="+posts[9]+"&cusType="+posts[10]+"&cusFrom="+posts[11]+"&pridictDate="+posts[12]+"&pridictMoney="+posts[13]+"&cusContacts="+posts[14]+"&cusTelephone="+posts[15]+"&hotCus=0&callback=back";
                 }else {
                    var urldata =  "form=CBFrm_cusChance&db=app.ou/combest_crm.nsf&unid="+unid+"&cusName="+posts[0]+"&cusNum="+posts[1]+"&cusWebsite="+posts[2]+"&cusDivide="+posts[3]+"&masterDivide="+posts[4]+"&findTime="+posts[5]+"&catchTime="+posts[6]+"&catchProcess="+posts[7]+"&cusProperty="+posts[8]+"&hotCus="+posts[9]+"&cusType="+posts[10]+"&cusFrom="+posts[11]+"&pridictDate="+posts[12]+"&pridictMoney="+posts[13]+"&cusContacts="+posts[14]+"&cusTelephone="+posts[15]+"&hotCus=0&callback=back";
                 }
        
            var result=app.postData(
                "http://app.server_address/app.ou/combest_mopcontroller.nsf/CBXsp_saveDoc.xsp",urldata
            );
            if(result!=null){
                eval(result);
            }
        })
 function back(){
            window.location.href="Sales_opportunities.html"
        }
</script>
</body>
<script type="text/javascript">
    lodings()
</script>
</html>